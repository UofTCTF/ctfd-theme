import{d as f,c as b,m as n,C as s}from"./index.js";import{c as y,m as v,e as w}from"./index2.js";import"./echarts.js";function x(r,t,c){let i={title:{left:"center",text:"Top 10 "+(r==="teams"?"Teams":"Users"),textStyle:{color:"#fff"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[],textStyle:{color:"#fff"}},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:[{type:"time",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter",height:20,top:35,fillerColor:"rgba(233, 236, 241, 0.4)"}],series:[]};const a=Object.keys(t);for(let e=0;e<a.length;e++){const l=[],h=[];for(let o=0;o<t[a[e]].solves.length;o++){l.push(t[a[e]].solves[o].value);const d=f(t[a[e]].solves[o].date);h.push(d.toDate())}const p=y(l);let u=h.map(function(o,d){return[o,p[d]]});i.legend.data.push(t[a[e]].name);const g={name:t[a[e]].name,type:"line",label:{normal:{position:"top"}},itemStyle:{normal:{color:b(t[a[e]].name+t[a[e]].id)}},data:u};i.series.push(g)}return c&&(i=v(i,c)),i}window.Alpine=n;window.CTFd=s;const m=window.scoreboardUpdateInterval||3e5;n.data("ScoreboardDetail",()=>({data:{},show:!0,activeBracket:null,async update(){this.data=await s.pages.scoreboard.getScoreboardDetail(10,this.activeBracket,{_cacheBust:Date.now()});let r=window.scoreboardChartOptions,t=x(s.config.userMode,this.data,r);w(this.$refs.scoregraph,t),this.show=Object.keys(this.data).length>0},async init(){this.update(),setInterval(()=>{this.update()},m)}}));n.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async update(){this.brackets=await s.pages.scoreboard.getBrackets(s.config.userMode),this.standings=await s.pages.scoreboard.getScoreboard()},async init(){this.$watch("activeBracket",r=>{this.$dispatch("bracket-change",r)}),this.update(),setInterval(()=>{this.update()},m)}}));n.start();
